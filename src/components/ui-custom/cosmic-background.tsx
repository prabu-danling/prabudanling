"use client";

import { useRef } from "react";
import { motion, useScroll, useTransform } from "framer-motion";
import { cn } from "@/lib/utils";

// Pre-defined static star positions for SSR consistency
// Layer 1: Small distant stars (150 stars)
const STAR_LAYER_1 = [
  [15.2, 25.3, 0.8, 0.15, 8, 0], [45.6, 60.1, 1.1, 0.12, 10, 1.5], [75.3, 35.8, 0.9, 0.18, 12, 3],
  [25.1, 80.4, 1.0, 0.14, 9, 0.8], [60.2, 15.7, 0.7, 0.16, 11, 2], [85.9, 70.2, 1.2, 0.13, 8, 4],
  [10.4, 45.6, 0.8, 0.17, 10, 1], [55.3, 90.1, 0.9, 0.11, 13, 2.5], [35.7, 10.2, 1.1, 0.15, 7, 0.5],
  [70.8, 55.4, 0.6, 0.14, 14, 3.5], [20.5, 65.9, 1.0, 0.12, 9, 1.8], [90.2, 30.6, 0.8, 0.16, 10, 0.3],
  [40.1, 85.3, 1.2, 0.13, 8, 2.8], [65.7, 40.5, 0.7, 0.15, 11, 4.2], [5.8, 95.2, 0.9, 0.11, 12, 1.2],
  [50.4, 5.1, 1.0, 0.14, 9, 3.8], [80.6, 75.8, 0.8, 0.16, 10, 0.6], [30.3, 50.7, 1.1, 0.12, 8, 2.2],
  [95.1, 20.4, 0.7, 0.17, 13, 4.5], [12.7, 72.1, 0.9, 0.13, 11, 1.4], [18.3, 32.5, 0.6, 0.15, 10, 0.9],
  [78.4, 92.6, 1.0, 0.11, 9, 3.2], [42.9, 48.3, 0.8, 0.14, 12, 1.7], [67.1, 8.7, 1.2, 0.16, 8, 2.1],
  [23.6, 58.2, 0.7, 0.12, 11, 0.4], [88.5, 43.1, 0.9, 0.15, 10, 3.9], [53.2, 78.9, 1.1, 0.13, 9, 1.1],
  [7.4, 18.6, 0.8, 0.17, 13, 2.6], [33.8, 68.4, 0.6, 0.14, 8, 0.7], [72.9, 27.3, 1.0, 0.11, 12, 4.1],
  [47.5, 83.5, 0.9, 0.16, 10, 1.9], [62.8, 12.4, 0.7, 0.12, 9, 3.3], [27.4, 37.8, 1.2, 0.15, 11, 0.2],
  [92.3, 62.1, 0.8, 0.13, 8, 2.4], [38.6, 97.5, 1.0, 0.14, 10, 1.6], [83.7, 52.9, 0.6, 0.16, 13, 3.7],
  [14.1, 87.2, 0.9, 0.11, 9, 0.8], [58.9, 22.7, 1.1, 0.17, 12, 2.9], [3.5, 42.4, 0.7, 0.13, 8, 1.3],
  [76.2, 7.8, 0.8, 0.15, 11, 4.3], [44.7, 73.6, 1.0, 0.12, 10, 0.6], [21.9, 97.1, 0.6, 0.14, 9, 2.0],
  [69.4, 33.2, 1.2, 0.16, 8, 3.5], [91.8, 68.5, 0.9, 0.11, 13, 1.0], [36.2, 18.9, 0.7, 0.13, 10, 2.7],
  [54.6, 44.8, 1.1, 0.15, 12, 0.3], [16.5, 54.1, 0.8, 0.12, 9, 3.1], [81.3, 91.4, 0.6, 0.17, 11, 1.5],
  [29.7, 4.2, 1.0, 0.14, 8, 2.3], [63.5, 65.7, 0.9, 0.11, 10, 0.9], [8.2, 29.8, 1.2, 0.16, 13, 4.0],
  [46.3, 80.1, 0.7, 0.13, 9, 1.8], [74.8, 15.4, 0.8, 0.15, 12, 3.6], [31.4, 95.3, 1.1, 0.12, 8, 0.5],
  [59.1, 35.9, 0.6, 0.14, 11, 2.2], [86.4, 71.2, 1.0, 0.16, 10, 1.1], [22.8, 11.3, 0.9, 0.13, 9, 3.8],
  [51.7, 56.8, 0.7, 0.17, 13, 0.7], [94.6, 46.1, 1.2, 0.11, 8, 2.5], [39.5, 21.6, 0.8, 0.15, 12, 4.2],
  [68.3, 86.4, 1.1, 0.14, 10, 1.4], [5.1, 61.5, 0.6, 0.12, 9, 0.4], [79.9, 26.7, 0.9, 0.16, 11, 3.0],
  [48.2, 72.3, 1.0, 0.13, 8, 1.9], [26.5, 41.8, 0.7, 0.15, 13, 2.8], [71.6, 6.1, 1.2, 0.11, 10, 0.2],
  [93.4, 81.5, 0.8, 0.17, 12, 3.4], [34.1, 31.4, 0.6, 0.14, 9, 1.2], [57.8, 96.7, 1.1, 0.12, 8, 2.1],
  [84.5, 51.2, 0.9, 0.16, 11, 0.8], [19.2, 16.9, 1.0, 0.13, 10, 3.9], [61.4, 67.8, 0.7, 0.15, 13, 1.6],
  [9.7, 37.5, 1.2, 0.11, 8, 2.6], [66.9, 92.1, 0.8, 0.14, 12, 0.6], [41.3, 2.3, 0.6, 0.17, 9, 4.1],
  [88.1, 58.6, 1.1, 0.12, 10, 1.7], [24.6, 88.9, 0.9, 0.16, 11, 3.3], [56.2, 28.4, 0.7, 0.13, 8, 0.5],
  [82.7, 73.7, 1.0, 0.15, 13, 2.4], [11.4, 49.2, 0.8, 0.11, 9, 1.0], [70.5, 18.1, 1.2, 0.14, 12, 3.7],
  [37.9, 63.4, 0.6, 0.16, 10, 0.3], [97.2, 34.6, 0.9, 0.12, 8, 2.0], [52.8, 9.8, 1.1, 0.17, 11, 1.8],
  [28.3, 79.5, 0.7, 0.13, 13, 4.4], [75.6, 44.9, 1.0, 0.15, 9, 0.9], [4.3, 24.7, 0.8, 0.11, 10, 2.9],
  [64.7, 59.3, 1.2, 0.14, 12, 1.3], [89.4, 84.8, 0.6, 0.16, 8, 3.2], [43.6, 39.1, 0.9, 0.12, 11, 0.7],
  [17.8, 94.6, 1.1, 0.17, 13, 2.2], [73.3, 1.4, 0.7, 0.13, 9, 4.0], [32.5, 54.3, 1.0, 0.15, 10, 1.5],
  [96.1, 19.2, 0.8, 0.11, 8, 0.6], [49.8, 69.6, 0.6, 0.16, 12, 3.5], [77.4, 34.8, 1.2, 0.14, 11, 2.3],
  [13.6, 84.1, 0.9, 0.12, 9, 1.1], [60.5, 11.5, 1.1, 0.17, 13, 0.4], [35.2, 46.2, 0.7, 0.13, 10, 3.8],
  [91.5, 77.4, 1.0, 0.15, 8, 2.7], [6.9, 61.9, 0.8, 0.11, 12, 1.9], [55.4, 26.3, 0.6, 0.16, 9, 0.8],
  [80.2, 92.7, 1.2, 0.14, 11, 3.1], [30.1, 7.6, 0.9, 0.12, 10, 2.5], [67.7, 52.4, 1.1, 0.17, 13, 1.4],
  [2.4, 42.8, 0.7, 0.13, 8, 4.3], [45.9, 73.1, 1.0, 0.15, 12, 0.5], [87.3, 18.7, 0.8, 0.11, 9, 2.1],
  [21.2, 88.4, 0.6, 0.16, 11, 1.6], [72.1, 37.9, 1.2, 0.14, 10, 3.6], [40.4, 63.2, 0.9, 0.12, 13, 0.9],
  [95.8, 48.5, 1.1, 0.17, 8, 2.8], [15.3, 23.1, 0.7, 0.13, 9, 1.2], [58.6, 98.9, 1.0, 0.15, 12, 3.9],
  [83.1, 8.2, 0.8, 0.11, 10, 0.3], [36.8, 58.7, 0.6, 0.16, 11, 2.4], [9.1, 33.4, 1.2, 0.14, 13, 1.8],
  [65.2, 79.8, 0.9, 0.12, 8, 4.2], [50.3, 14.6, 1.1, 0.17, 9, 0.7], [26.9, 49.3, 0.7, 0.13, 12, 3.0],
  [78.5, 64.1, 1.0, 0.15, 10, 1.5], [1.7, 19.4, 0.8, 0.11, 11, 2.6], [53.9, 85.7, 0.6, 0.16, 8, 0.4],
  [90.7, 41.2, 1.2, 0.14, 13, 3.4], [11.8, 76.5, 0.9, 0.12, 9, 1.0], [68.8, 21.8, 1.1, 0.17, 10, 2.2],
  [38.4, 96.4, 0.7, 0.13, 12, 4.1], [74.7, 5.3, 1.0, 0.15, 11, 0.8], [19.5, 51.6, 0.8, 0.11, 8, 3.3],
  [62.1, 71.9, 0.6, 0.16, 13, 1.7], [85.9, 36.2, 1.2, 0.14, 9, 2.9], [47.4, 11.1, 0.9, 0.12, 10, 0.6],
  [7.6, 91.3, 1.1, 0.17, 12, 3.7], [71.3, 56.4, 0.7, 0.13, 8, 1.3], [33.6, 26.8, 1.0, 0.15, 11, 2.0],
  [98.3, 81.6, 0.8, 0.11, 9, 4.0], [54.7, 46.7, 0.6, 0.16, 10, 0.9], [22.4, 62.5, 1.2, 0.14, 13, 2.5],
  [76.8, 17.2, 0.9, 0.12, 8, 1.1], [42.1, 82.3, 1.1, 0.17, 12, 3.2], [5.4, 37.6, 0.7, 0.13, 9, 0.5],
  [69.5, 93.8, 1.0, 0.15, 11, 2.3], [89.2, 28.4, 0.8, 0.11, 10, 1.9], [29.3, 68.1, 0.6, 0.16, 8, 4.2],
  [57.2, 3.9, 1.2, 0.14, 13, 0.7], [81.7, 58.3, 0.9, 0.12, 9, 3.1], [14.7, 43.6, 1.1, 0.17, 12, 1.4],
  [64.4, 78.2, 0.7, 0.13, 10, 2.8], [92.9, 13.5, 1.0, 0.15, 11, 0.3], [46.8, 34.7, 0.8, 0.11, 8, 3.6],
  [20.1, 89.1, 0.6, 0.16, 13, 1.2], [75.4, 54.2, 1.2, 0.14, 9, 2.4], [4.1, 9.8, 0.9, 0.12, 10, 4.4],
  [66.6, 44.5, 1.1, 0.17, 12, 0.6], [31.9, 75.8, 0.7, 0.13, 8, 1.8], [94.5, 69.4, 1.0, 0.15, 11, 3.0],
  [48.5, 20.1, 0.8, 0.11, 9, 2.1], [23.8, 55.3, 0.6, 0.16, 10, 0.9], [86.6, 90.2, 1.2, 0.14, 13, 1.6],
  [59.4, 65.9, 0.9, 0.12, 8, 3.5], [12.3, 30.5, 1.1, 0.17, 12, 2.7], [70.9, 5.7, 0.7, 0.13, 9, 0.4],
  [35.4, 80.4, 1.0, 0.15, 11, 4.1], [97.7, 45.1, 0.8, 0.11, 10, 1.0], [51.2, 10.8, 0.6, 0.16, 8, 3.3],
  [27.6, 60.5, 1.2, 0.14, 13, 1.5], [79.3, 25.9, 0.9, 0.12, 9, 2.2], [3.9, 95.6, 1.1, 0.17, 12, 0.8],
];

// Layer 2: Medium stars (80 stars)
const STAR_LAYER_2 = [
  [20.5, 35.2, 2.1, 0.08, 12, 1], [55.8, 65.4, 2.4, 0.06, 14, 2], [78.2, 22.7, 2.0, 0.09, 11, 3],
  [12.4, 78.9, 2.3, 0.07, 13, 1.5], [62.7, 18.3, 2.2, 0.08, 15, 2.5], [88.1, 55.6, 2.5, 0.05, 10, 0.5],
  [35.3, 92.1, 2.1, 0.09, 12, 3.5], [70.6, 8.4, 2.4, 0.06, 14, 1], [45.9, 42.8, 2.0, 0.08, 11, 2],
  [93.2, 71.5, 2.3, 0.07, 13, 3], [28.1, 28.6, 2.2, 0.09, 15, 1.5], [67.4, 85.2, 2.5, 0.05, 10, 2.5],
  [8.7, 53.4, 2.1, 0.08, 12, 0.5], [52.3, 12.9, 2.4, 0.06, 14, 3.5], [75.8, 68.7, 2.0, 0.09, 11, 1],
  [40.2, 38.5, 2.3, 0.07, 13, 2], [95.6, 91.3, 2.2, 0.08, 15, 1.5], [22.9, 5.8, 2.5, 0.05, 10, 2.5],
  [60.5, 74.1, 2.1, 0.09, 12, 0.5], [84.3, 32.6, 2.4, 0.06, 14, 3.5], [47.6, 97.5, 2.0, 0.08, 11, 1],
  [15.8, 61.2, 2.3, 0.07, 13, 2], [72.1, 47.9, 2.2, 0.09, 15, 1.5], [2.4, 17.3, 2.5, 0.05, 10, 2.5],
  [58.7, 83.6, 2.1, 0.08, 12, 0.5], [81.4, 24.5, 2.4, 0.06, 14, 3.5], [33.6, 52.8, 2.0, 0.09, 11, 1],
  [90.9, 9.2, 2.3, 0.07, 13, 2], [25.4, 89.4, 2.2, 0.08, 15, 1.5], [64.8, 36.1, 2.5, 0.05, 10, 2.5],
  [6.1, 70.8, 2.1, 0.09, 12, 0.5], [49.3, 15.7, 2.4, 0.06, 14, 3.5], [77.9, 94.2, 2.0, 0.08, 11, 1],
  [18.5, 44.3, 2.3, 0.07, 13, 2], [87.6, 59.1, 2.2, 0.09, 15, 1.5], [42.7, 3.6, 2.5, 0.05, 10, 2.5],
  [69.2, 79.8, 2.1, 0.08, 12, 0.5], [5.3, 26.4, 2.4, 0.06, 14, 3.5], [56.1, 51.7, 2.0, 0.09, 11, 1],
  [92.4, 87.3, 2.3, 0.07, 13, 2], [31.8, 12.5, 2.2, 0.08, 15, 1.5], [74.5, 63.9, 2.5, 0.05, 10, 2.5],
  [9.2, 96.8, 2.1, 0.09, 12, 0.5], [63.7, 31.2, 2.4, 0.06, 14, 3.5], [38.4, 77.6, 2.0, 0.08, 11, 1],
  [85.1, 48.5, 2.3, 0.07, 13, 2], [21.3, 20.9, 2.2, 0.09, 15, 1.5], [54.8, 91.4, 2.5, 0.05, 10, 2.5],
  [1.8, 65.3, 2.1, 0.08, 12, 0.5], [76.4, 7.1, 2.4, 0.06, 14, 3.5], [44.9, 42.6, 2.0, 0.09, 11, 1],
  [96.7, 34.8, 2.3, 0.07, 13, 2], [17.6, 85.9, 2.2, 0.08, 15, 1.5], [59.2, 56.4, 2.5, 0.05, 10, 2.5],
  [82.5, 72.7, 2.1, 0.09, 12, 0.5], [36.1, 1.3, 2.4, 0.06, 14, 3.5], [71.8, 28.5, 2.0, 0.08, 11, 1],
  [11.4, 93.6, 2.3, 0.07, 13, 2], [48.7, 67.2, 2.2, 0.09, 15, 1.5], [80.3, 14.8, 2.5, 0.05, 10, 2.5],
  [24.6, 39.7, 2.1, 0.08, 12, 0.5], [65.9, 82.1, 2.4, 0.06, 14, 3.5], [93.8, 51.3, 2.0, 0.09, 11, 1],
  [7.5, 8.6, 2.3, 0.07, 13, 2], [53.4, 25.9, 2.2, 0.08, 15, 1.5], [78.6, 98.4, 2.5, 0.05, 10, 2.5],
  [41.5, 60.5, 2.1, 0.09, 12, 0.5], [89.4, 43.2, 2.4, 0.06, 14, 3.5], [19.2, 75.8, 2.0, 0.08, 11, 1],
  [62.3, 10.1, 2.3, 0.07, 13, 2], [4.7, 33.4, 2.2, 0.09, 15, 1.5], [55.6, 88.7, 2.5, 0.05, 10, 2.5],
  [84.9, 64.5, 2.1, 0.08, 12, 0.5], [30.3, 19.6, 2.4, 0.06, 14, 3.5], [68.7, 95.3, 2.0, 0.09, 11, 1],
  [14.5, 50.9, 2.3, 0.07, 13, 2], [91.2, 6.4, 2.2, 0.08, 15, 1.5], [46.2, 71.5, 2.5, 0.05, 10, 2.5],
];

// Layer 3: Large close stars (30 stars)
const STAR_LAYER_3 = [
  [18.2, 42.5, 3.5, 0.04, 15, 1], [55.4, 75.8, 4.0, 0.03, 18, 2], [82.7, 28.3, 3.8, 0.04, 16, 3],
  [25.6, 88.1, 3.2, 0.05, 14, 1.5], [68.3, 15.7, 3.6, 0.04, 17, 2.5], [92.5, 62.4, 4.2, 0.02, 19, 0.5],
  [38.1, 5.9, 3.4, 0.05, 15, 3.5], [75.9, 95.2, 3.9, 0.03, 16, 1], [12.4, 53.6, 3.3, 0.04, 14, 2],
  [48.7, 32.8, 4.1, 0.02, 18, 3], [85.2, 78.5, 3.5, 0.04, 15, 1.5], [22.8, 19.4, 3.7, 0.03, 17, 2.5],
  [62.5, 91.6, 3.4, 0.05, 14, 0.5], [95.1, 47.2, 4.0, 0.02, 19, 3.5], [8.3, 71.9, 3.6, 0.04, 16, 1],
  [35.7, 64.3, 3.2, 0.05, 15, 2], [72.4, 8.6, 3.8, 0.03, 17, 3], [58.9, 36.5, 4.2, 0.02, 18, 1.5],
  [15.1, 82.7, 3.4, 0.04, 14, 2.5], [78.6, 55.8, 3.5, 0.05, 15, 0.5], [42.3, 98.4, 3.9, 0.03, 16, 3.5],
  [5.7, 25.1, 3.3, 0.04, 14, 1], [88.4, 13.2, 4.1, 0.02, 19, 2], [32.5, 49.7, 3.7, 0.03, 17, 3],
  [65.8, 86.9, 3.4, 0.05, 15, 1.5], [97.3, 68.4, 3.6, 0.04, 16, 2.5], [28.4, 7.5, 3.8, 0.03, 17, 0.5],
  [52.1, 41.6, 4.0, 0.02, 18, 3.5], [19.7, 59.8, 3.2, 0.05, 14, 1], [76.5, 34.9, 3.5, 0.04, 15, 2],
];

// Nebula positions
const NEBULA_POSITIONS = [
  { x: 20, y: 30, size: 400, hue: 220 },
  { x: 75, y: 60, size: 350, hue: 260 },
  { x: 45, y: 80, size: 300, hue: 200 },
  { x: 85, y: 15, size: 250, hue: 240 },
  { x: 10, y: 70, size: 350, hue: 280 },
];

// Shooting stars
const SHOOTING_STARS = [
  { startX: 25, startY: 15, angle: 45, delay: 5 },
  { startX: 65, startY: 8, angle: 35, delay: 18 },
  { startX: 45, startY: 20, angle: 50, delay: 32 },
];

// Individual Star Component
function StarParticle({ 
  x, y, size, opacity, duration, delay 
}: { 
  x: number; 
  y: number; 
  size: number; 
  opacity: number; 
  duration: number; 
  delay: number;
}) {
  // Use rounded values for SSR consistency
  const roundedOpacity = Math.round(opacity * 100) / 100;
  
  return (
    <motion.div
      className="absolute rounded-full"
      style={{
        left: `${x}%`,
        top: `${y}%`,
        width: size,
        height: size,
        background: `radial-gradient(circle, rgba(255,255,255,${roundedOpacity}) 0%, rgba(255,255,255,${roundedOpacity * 0.5}) 40%, transparent 70%)`,
      }}
      animate={{
        opacity: [roundedOpacity, roundedOpacity * 0.6, roundedOpacity],
        scale: [1, 1.1, 1],
      }}
      transition={{
        duration,
        delay,
        repeat: Infinity,
        ease: "easeInOut",
      }}
    />
  );
}

// Shooting Star Component
function ShootingStar({ startX, startY, angle, delay }: { 
  startX: number; 
  startY: number;
  angle: number;
  delay: number;
}) {
  return (
    <motion.div
      className="absolute"
      style={{
        left: `${startX}%`,
        top: `${startY}%`,
        width: "100px",
        height: "1px",
        background: "linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent)",
        transform: `rotate(${angle}deg)`,
        transformOrigin: "left center",
      }}
      initial={{ opacity: 0, x: 0 }}
      animate={{
        opacity: [0, 0.8, 0.8, 0],
        x: [0, 200],
      }}
      transition={{
        duration: 1.2,
        delay,
        repeat: Infinity,
        repeatDelay: 20,
        ease: "easeOut",
      }}
    />
  );
}

// Nebula Component
function Nebula({ x, y, size, hue }: { x: number; y: number; size: number; hue: number }) {
  return (
    <motion.div
      className="absolute rounded-full pointer-events-none"
      style={{
        left: `${x}%`,
        top: `${y}%`,
        width: size,
        height: size,
        background: `radial-gradient(ellipse at center, hsla(${hue}, 60%, 40%, 0.03) 0%, transparent 70%)`,
        filter: "blur(50px)",
        transform: "translate(-50%, -50%)",
      }}
      animate={{
        scale: [1, 1.15, 1],
        opacity: [0.4, 0.6, 0.4],
      }}
      transition={{
        duration: 25,
        repeat: Infinity,
        ease: "easeInOut",
      }}
    />
  );
}

// Main Cosmic Background Component
// Only renders in dark mode for best effect
export function CosmicBackground({ className }: { className?: string }) {
  const containerRef = useRef<HTMLDivElement>(null);
  
  // Scroll-based parallax (disabled on mobile for performance)
  const { scrollYProgress } = useScroll();
  
  return (
    <div 
      ref={containerRef}
      className={cn(
        "fixed inset-0 overflow-hidden pointer-events-none z-0",
        // Only show in dark mode
        "dark:block hidden",
        className
      )}
    >
      {/* Deep space gradient base */}
      <div className="absolute inset-0 bg-gradient-to-b from-[#0a0015] via-[#0d0d1a] to-[#050510]" />
      
      {/* Subtle cosmic noise texture overlay */}
      <div 
        className="absolute inset-0 opacity-[0.02]"
        style={{
          backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`,
        }}
      />

      {/* Nebula clouds - Hidden on mobile for performance */}
      <div className="hidden sm:block">
        {NEBULA_POSITIONS.map((nebula, i) => (
          <Nebula key={i} {...nebula} />
        ))}
      </div>

      {/* Star layer 1 - Far (parallax on desktop only) */}
      <motion.div 
        className="absolute inset-0"
        style={{ y: useTransform(scrollYProgress, [0, 1], ["0%", "5%"]) }}
      >
        {STAR_LAYER_1.map((star, i) => (
          <StarParticle 
            key={i} 
            x={star[0]} 
            y={star[1]} 
            size={star[2]} 
            opacity={star[3]} 
            duration={star[4]} 
            delay={star[5]} 
          />
        ))}
      </motion.div>

      {/* Star layer 2 - Mid (parallax on desktop only) */}
      <motion.div 
        className="absolute inset-0 hidden sm:block"
        style={{ y: useTransform(scrollYProgress, [0, 1], ["0%", "10%"]) }}
      >
        {STAR_LAYER_2.map((star, i) => (
          <StarParticle 
            key={i} 
            x={star[0]} 
            y={star[1]} 
            size={star[2]} 
            opacity={star[3]} 
            duration={star[4]} 
            delay={star[5]} 
          />
        ))}
      </motion.div>

      {/* Star layer 3 - Close (parallax on desktop only) */}
      <motion.div 
        className="absolute inset-0 hidden md:block"
        style={{ y: useTransform(scrollYProgress, [0, 1], ["0%", "15%"]) }}
      >
        {STAR_LAYER_3.map((star, i) => (
          <StarParticle 
            key={i} 
            x={star[0]} 
            y={star[1]} 
            size={star[2]} 
            opacity={star[3]} 
            duration={star[4]} 
            delay={star[5]} 
          />
        ))}
      </motion.div>

      {/* Shooting stars - Desktop only */}
      <div className="hidden lg:block">
        {SHOOTING_STARS.map((ss, i) => (
          <ShootingStar key={i} {...ss} />
        ))}
      </div>

      {/* Subtle center glow */}
      <div 
        className="absolute inset-0"
        style={{
          background: "radial-gradient(ellipse 70% 50% at 50% 50%, rgba(139, 92, 246, 0.02) 0%, transparent 50%)",
        }}
      />

      {/* Dream gold accent glow - Hidden on mobile */}
      <motion.div
        className="hidden sm:block absolute top-1/4 left-1/4 w-[500px] h-[500px] rounded-full"
        style={{
          background: "radial-gradient(circle, rgba(212, 175, 55, 0.015) 0%, transparent 60%)",
          filter: "blur(60px)",
        }}
        animate={{
          opacity: [0.3, 0.5, 0.3],
          scale: [1, 1.05, 1],
        }}
        transition={{
          duration: 18,
          repeat: Infinity,
          ease: "easeInOut",
        }}
      />

      {/* Blue accent glow - Hidden on mobile */}
      <motion.div
        className="hidden md:block absolute bottom-1/4 right-1/4 w-[400px] h-[400px] rounded-full"
        style={{
          background: "radial-gradient(circle, rgba(59, 130, 246, 0.012) 0%, transparent 60%)",
          filter: "blur(60px)",
        }}
        animate={{
          opacity: [0.2, 0.4, 0.2],
          scale: [1, 1.1, 1],
        }}
        transition={{
          duration: 22,
          repeat: Infinity,
          ease: "easeInOut",
          delay: 5,
        }}
      />
    </div>
  );
}

export default CosmicBackground;
